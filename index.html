<!-- type cmd first -->
<!-- npx json-server --watch admin.json --port 1234 -->
<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" user-scalable="no">
    <title>Home | shopping</title>
    <link rel="icon" href="star.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
   <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="header-one"> 
            <img src="./JA-xiaomi-brands-top-strip.gif" alt="">    
        </div>
        <div class="header-two">
            <div class="side-one">
                <img src="star.png" alt="">
                <a href="">Sell on Jumia</a>
            </div>
            <div class="side-two">
               <a href="">  <img src="jumia.png" alt=""> </a> 
               <a href=""> <img src="jumiapay.png" alt=""> </a> 
               <a href=""> <img src="jumiafood.png" alt=""> </a> 
               <a href=""> <img src="jumiaparty.png" alt=""> </a> 
               <a href=""> <img src="jumialog.png" alt=""> </a>
               
            </div>
        </div>
    </header>
    
    <nav>
        <div class="green" onclick="move()" id="green"><div class="white" id="wh"></div></div> 
        <div class="first-nav">
            <img src="Jumia-Logo.png" alt="hi">
        </div>

        <div class="second-nav">


            <div class="first">
                <i class="fa-solid fa-magnifying-glass" style="color: #adadad;"></i>
                <input type="text" placeholder="Search products, brands and categories" id="inp">
                <button onclick="searchBar(inp)"> SEARCH</button>
            </div>


            <div class="second">
                
                <button id="acct">
                </button>
                
                <div class="second-content">
                    <div class="sign-in" id="signIn"></div>
  
                </div>
                
            </div>
            <div class="third">
              
                 <button>
                    <i class="fa-regular fa-circle-question" style="color: #000000;"></i>
                    Help
                    <i class="fa-solid fa-angle-down" style="color: #000000;"></i>
                </button>
                
                <div class="third-content">
                   <div class="help"> Help Center</div>
                   <div class="track"> Place & track order</div>
                   <div class="cancel"> Order cancellation</div>
                   <div class="return"> Returns & Refunds</div>
                   <div class="payment"> Payment & Jumia account </div>
                   <div class="live-chat"> <button> LIVE CHAT</button></div>
                </div>
              
               
            </div>
            <div class="forth">
              
                <a href="cart.html">
                    <i class="fa-solid fa-cart-shopping" style="color: #000000;"></i>   <div> Cart</div> 
                    <span id="showCart"></span>
                </a>
            </div>
        </div>
        <div class="animation" id="animation"> <p>You've successfully added this item to the cart</p> </div>
    </nav>

    <main>
            <div class="main-all">
                    <div class="all-section">
                       <div class="left-section">
                            <div class="left-section-all">
                                <p onclick="category('Grocery')"> <i class="fa-solid fa-apple-whole icon" style="color: #000000;"></i> <span> Supermarket</span></p>
                                <p onclick="category('Health & beauty')"> <i class="fa-solid fa-spray-can-sparkles icon" style="color: #000000;"></i><span> Health & Beauty</span></p>
                                <p onclick="category('Home & office')"> <i class="fa-solid fa-house icon" style="color: #000000;"></i> <span> Home & Office</span></p>
                                <p onclick="category('Appliances')"> <i class="fa-solid fa-kitchen-set icon" style="color: #000000;"></i> <span> Appliances</span></p>
                                <p onclick="category('Smartphone')"> <i class="fa-solid fa-mobile-screen-button icon" style="color: #000000;"></i> <span> Phones & Tablets</span></p>
                                <p onclick="category('Computing')"> <i class="fa-solid fa-computer icon" style="color: #000000;"></i><span> Computing</span></p>
                                <p onclick="category('Electronics')"> <i class="fa-solid fa-tv icon" style="color: #000000;"></i> <span> Electronics</span></p>
                                <p onclick="category('Fashion')"> <i class="fa-solid fa-shirt icon" style="color: #000000;"></i><span> Fashion</span></p>
                                <p onclick="category('Baby products')"> <i class="fa-solid fa-baby icon" style="color: #000000;"></i> <span> Baby Products</span></p>
                                <p onclick="category('Gaming')"> <i class="fa-solid fa-gamepad icon" style="color: #000000;"></i> <span class="gaming"> Gaming</span></p>
                                <p onclick="category('Sporting')"> <i class="fa-solid fa-dumbbell icon" style="color: #000000;"></i><span> Sporting Goods</span></p>
                                <p onclick="category('other')"> <i class="fa-solid fa-chalkboard icon" style="color: #000000;"></i><span> Other category</span></p>
                            </div>
                        </div>

                    <div class="middle-section">
                          <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                              <div class="carousel-item active" data-bs-interval="3000">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1689080732/contentservice/Cook.jpg_Hy-omRct2.jpg" class="d-block w-100" alt="...">
                              </div>
                              <div class="carousel-item" data-bs-interval="1000">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1689080732/contentservice/Groceries.jpg_B1foQC5F2.jpg" class="d-block w-100" alt="...">
                              </div>
                              <div class="carousel-item">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1689080729/contentservice/Beauty.jpg_B1gjXR9K2.jpg" class="d-block w-100" alt="...">
                              </div>
                             <div class="carousel-item">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1686914588/contentservice/samz.jpg_BJzmLTtPn.jpg" class="d-block w-100" alt="...">
                              </div>
                              <div class="carousel-item">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1689083332/contentservice/Phone.jpg_B1hTTC5K3.jpg" class="d-block w-100" alt="...">
                              </div>
                              <div class="carousel-item">
                                <img src="https://www-konga-com-res.cloudinary.com/image/upload/w_auto,f_auto,fl_lossy,dpr_auto,q_auto/v1689080731/contentservice/Electronics.jpg_H1xiQ0qtn.jpg" class="d-block w-100" alt="...">
                              </div>
                            </div>
                            <button class="carousel-control-prev carol-btn" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
                              <span class="carousel-control-prev-icon nxt" aria-hidden="true"></span>
                              <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next carol-btn" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
                              <span class="carousel-control-next-icon nxt" aria-hidden="true"></span>
                              <span class="visually-hidden">Next</span>
                            </button>
                          </div>



                    </div>

                       <div class="right-section">
                            <div> <img src="./JA-live-now-Countdown.gif" alt=""></div>
                            <div> <img src="JForce.png" alt=""></div>
                       </div>
                    </div>



                   
                    <div id="flex-container" class="testimonials">
                     
                        <div id="left-zone">
                          <ul class="list">
                            <li class="item">
                              <input type="radio" id="radio_testimonial-1" name="basic_carousel" checked="checked" />
                              <label class="label_testimonial-1" for="radio_testimonial-1">Computing Deals</label>
                              <div class="content-test content_testimonial-1" >
                                <span class="picto" onclick="category('Computing')"></span>
                                <h1 onclick="category('Computing')">Computing Deals</h1>
                                <p onclick="category('Computing')">We have an amazing collection of top computing brands like Hp, Dell, Lenovo, Microsoft, Apple Macbook, and more! You can either buy these computing devices as desktops or laptops depending on your choice with massive discount</p>
                            </div>
                            </li>
                            <li class="item">
                              <input type="radio" id="radio_testimonial-2" name="basic_carousel" />
                              <label class="label_testimonial-2" for="radio_testimonial-2">Health & Beauty</label>
                              <div class="content-test content_testimonial-2">
                                <span class="picto" onclick="category('Health & beauty')"></span>
                                <h1 onclick="category('Health & beauty')">Health & Beauty</h1>
                                <p onclick="category('Health & beauty')">Our online store also offers you the best beauty products from top brands in the world, e.g. Nivea and many others. Many things related to health and beauty e.g. skin care products, makeup and cosmetics, wigs, oral care, hair care, and fragrances can be found at our online store.</p>
                              </div>
                            </li>
                            <li class="item">
                              <input type="radio" id="radio_testimonial-3" name="basic_carousel" />
                              <label class="label_testimonial-3" for="radio_testimonial-3">Phones & Tablets</label>
                              <div class="content-test content_testimonial-3">
                                <span class="picto" onclick="category('Smartphone')"></span>
                                <h1 onclick="category('Smartphone')">Phones & Tablets</h1>
                                <p onclick="category('Smartphone')">Shopping with guarantees that you get the latest mobile phones, tablets, or phablets before anyone else. Buy trusted Apple iOS iPhones and iPads and quality Android brands like Samsung, Tecno, Xiaomi, Infinix, and many others!</p>
                              </div>
                            </li>
                            <li class="item">
                              <input type="radio" id="radio_testimonial-4" name="basic_carousel" />
                              <label class="label_testimonial-4" for="radio_testimonial-4">Groceries</label>
                              <div class="content-test content_testimonial-4">
                                <span class="picto" onclick="category('Grocery')"></span>
                                <h1 onclick="category('Grocery')">Groceries</h1>
                                <p onclick="category('Grocery')">Shop for your daily groceries at prices cheaper than others. Check off your grocery list and stock up your pantry with a variety of items ranging from rice to cooking oils, wines, Snacks, beverages, household cleaning items, and many others.</p>
                              </div>
                            </li>
                          </ul>
                        </div>
                        <div id="right-zone"></div>
                      </div>

                    <div class="all-items" id="bdy">
                        <div class="ann-deals" id="ann">Top Anniversary Deals</div>
                        <div id="display" class="test"></div>
                    </div>
                    
                      <div class="beauty-deals">
                        <div class="beauty-deals-text" id="beautyText">
                            <p> Pick For You</p>
                        </div>
                        <div class="all-beauty-deals" id="newBdy2">
            
                        </div>
                      </div>

                      <div class="beauty-deals">
                        <div class="beauty-deals-text" id="beautyText2">
                            <p> Computing Deals</p>
                        </div>
                        <div class="all-beauty-deals" id="newBdy">
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/laptops/hp-laptops_300x400.png" alt=""></div>
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/other-computers-accessories/printers_300x400.png" alt=""></div>
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/laptops/gaming-laptop_300x400.png" alt=""></div>
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/other-computers-accessories/accessories_300x400.png" alt=""></div>
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/laptops/lenovo-laptops_300x400.png" alt=""></div>
                            <div> <img src="https://ng.jumia.is/cms/0-1-category-pages/computing/other-computers-accessories/external-hd_300x400.png" alt=""></div>
                        </div>
                      </div>
                    <!-- </div> -->
            </div>

            <button class="position-fixed bottom-0 end-0 translate-middle d-none top" onclick="scrollToTop()" id="back-to-up">
                <i class="fa fa-arrow-up" aria-hidden="true"></i>
            </button>
      
    </main>
   


   <script src="all.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>

<script>



    let display = document.getElementById("display")
    let white = document.getElementById("wh")
    let green = document.getElementById("green")
    let bdy = document.getElementById("bdy")
    let newBdy = document.getElementById("newBdy")
    let newBdy2 = document.getElementById("newBdy2")
    let ann = document.getElementById("ann")
    let beautyText = document.getElementById("beautyText")
    let beautyText2 = document.getElementById("beautyText2")


    let acct = document.getElementById("acct")
    let sign_in = document.getElementById("signIn")
    let loggedUser = JSON.parse(localStorage.getItem("loginUser"))
    if (loggedUser != null){
        acct.innerHTML = `<div class="welcome"> HI ${loggedUser.name} </div>`
        sign_in.innerHTML = `
        <div class="my-account"> <i class="fa-regular fa-user" style="color: #000000;"></i> <span class="account-text"> My account</span> </div>
        <div class="order" > <a href="order.html"><i class="fa-solid fa-shop" style="color: #000000;"></i> <span class="order-text"> Orders</span></a></div>
        <div class="saved"> <i class="fa-regular fa-heart" style="color: #000000;"></i> <a href="saved-item.html"> <span class="saved-text">Saved Item</span></a></div>
        <button onclick="logout()">LOG OUT</button>
        `
    }
    else{
        acct.innerHTML = `
        <i class="fa-regular fa-user" style="color: #000000;"></i>
        Account
        <i class="fa-solid fa-angle-down" style="color: #000000;"></i>
        `
        sign_in.innerHTML = `
        <button onclick="signin()">SIGN IN</button>
        <div class="my-account"> <i class="fa-regular fa-user" style="color: #000000;"></i> <span class="account-text"> My account</span> </div>
         <div class="order"> <i class="fa-solid fa-shop" style="color: #000000;"></i> <span class="order-text"> Orders</span></div>
         <div class="saved"> <i class="fa-regular fa-heart" style="color: #000000;"></i> <a href="saved-item.html"> <span class="saved-text">Saved Item</span></a></div>
        `
    }
    let newShop = JSON.parse(localStorage.getItem("newshop"))
    let pickYou = newShop.filter((e) => e.category == "pick")
    for (i=0; i < pickYou.length; i++){
        newBdy2.innerHTML += `
        <div onclick="showPick(${pickYou[i].id})">

            
       

<article class="card">
        <div class="card__inner">
        <div class="card__body card__body--front">
            <h2 class="card__title">
            <img src=${pickYou[i].thumbnail}></h2>
            <p class="text-truncate"> ${pickYou[i].title}</p>
        </div>
        <div class="card__body card__body--back">
            <h2 class="card__title">
            <img src=${pickYou[i].image[1]}>
            </h2>
            <p>${pickYou[i].price}</p>
            <p class="back-discount"><span>Discount:</span>  ${pickYou[i].discount}%</p>
        </div>
    </div>
</article>
        </div>

        `
    }
    
    function showPick(id){
        localStorage.setItem("productId", id)
        window.location.href = "product.html"   
    }

    function move(){
        green.classList.toggle("slide")
        bdy.classList.toggle("change")
        newBdy.classList.toggle("change")
        newBdy2.classList.toggle("change")
        ann.classList.toggle("change")
        beautyText.classList.toggle("change")
        beautyText2.classList.toggle("change")
    }
     fetch("http://localhost:1234/product")
     .then( (shopping) => shopping.json())
   
    .then((shop) => {
        localStorage.setItem("newshop" , JSON.stringify(shop))
        console.log("DOne")
    
        for (i = 0; i < shop.length; i ++){
            if (i == 30){
                break
            }
            else{
                let id = shop[i].id
            display.innerHTML += ` <div class="product" > 
                <div>
                    <div onclick="showProduct(${id})" id="${id}">       
                        <div>  <img src="${shop[i].thumbnail}"></div>
                        <div class="title text-truncate">   ${shop[i].title}</div>
                        <div class="price"> ${shop[i].price} </div>
                        <div class="discount">  <span>Discount:</span> ${shop[i].discount}%</div></div>


                    <div> 
                         <div class="cart" onclick=addCart(${id})> <button> ADD TO CART </button> </div>
                    </div>
                </div>
             
               
            </div> `
            }
        }
    })

    function showProduct(id){
        localStorage.setItem("productId", id)
        window.location.href = "product.html"   
    }

    function category(val){
        localStorage.setItem("categories", val)
        window.location.href = "category.html"
    }

    function signin(){
        window.location.href = "signin-signup.html"
    }

    function logout(){
        localStorage.removeItem("loginUser")
        window.location.href = "index.html"
    }

    let animation = document.getElementById("animation")
    function addCart(id){
        let search = newShop.find((e) => e.id == id)
        search.qty = 1
        search.stock -= 1
        fetch("http://localhost:1234/cart", {
            headers:{
                "Content-type": "application/json"
            },
            method: "POST",
            body: JSON.stringify(search)
        }).then((res)=> res.json())
        .then((data)=>{
            animation.style.display = "block"
            setTimeout(() =>{
            window.location.href = "cart.html"
            }, 1300)
            fetchCart()
        }).catch((err)=>{
            alert("You've added this item already")
            window.location.href = "cart.html"
           
        })
       
    }

    let showCart = document.getElementById("showCart")
    function fetchCart(){
        fetch("http://localhost:1234/cart")
        .then((res)=>res.json())
        .then((data)=>{
            cart = data;
            showCart.innerHTML = cart.length == 0 ? null : cart.length
            if (showCart.innerHTML == ""){
                showCart.style.padding = "0"
            }
        })
    }
    fetchCart()


    window.onscroll = () => {
  toggleTopButton();
}
function scrollToTop(){
  window.scrollTo({top: 0, behavior: 'smooth'});
}

function toggleTopButton() {
  if (document.body.scrollTop > 20 ||
      document.documentElement.scrollTop > 20) {
    document.getElementById('back-to-up').classList.remove('d-none');
  } else {
    document.getElementById('back-to-up').classList.add('d-none');
  }
}

</script>

<script>
    // Makeshift carousel function that gets invoked with the Index to start it off, then the callback increments the index to recursively invoke the same function. Works even in IE11!
var testimonialItems = document.querySelectorAll(".item label");
var timer;
function cycleTestimonials(index) {
   timer = setTimeout(function() {
    var evt;
    if (document.createEvent){
      //If browser = IE, then polyfill
      evt = document.createEvent('MouseEvent');
      evt.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
    } else {
      //If Browser = modern, then create new MouseEvent
      evt = new MouseEvent("click", {
            view: window,
            bubbles: true,
            cancelable: true,
            clientX: 20
          });
    }
    var ele = "." + testimonialItems[index].className;
    var ele2 = document.querySelector(ele)
    ele2.dispatchEvent(evt);
    index++; // Increment the index
    if (index >= testimonialItems.length) {
      index = 0; // Set it back to `0` when it reaches `3`
    }
    cycleTestimonials(index); // recursively call `cycleTestimonials()`
    document.querySelector(".testimonials").addEventListener("click", function() {
      clearTimeout(timer); //stop the carousel when someone clicks on the div
    });
  }, 2000); //adjust scroll speed in miliseconds
}
//run the function
cycleTestimonials(0);
function searchBar(inp){
  localStorage.setItem("searchItem", inp.value)
  window.location.href = "searchresult.html"
}

function  order(){
  window.location.href = "order.html"
}
</script>